<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>&lt;a href=&quot;http://travis-ci.org/astrolet/precious&quot;&gt;&lt;img src=&quot;https://secure.travis-ci.org/astrolet/precious.png&quot; alt=&quot;Build Status&quot; /&gt;&lt;/a&gt;</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
  <style type='text/css' media='all'>
  /* style: toc */
  .man-navigation {display:block !important;position:fixed;top:0;left:113ex;height:100%;width:100%;padding:48px 0 0 0;border-left:1px solid #dbdbdb;background:#eee}
  .man-navigation a,.man-navigation a:hover,.man-navigation a:link,.man-navigation a:visited {display:block;margin:0;padding:5px 2px 5px 30px;color:#999;text-decoration:none}
  .man-navigation a:hover {color:#111;text-decoration:underline}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#SAY">SAY</a>
    <a href="#HOW">HOW</a>
    <a href="#ABOUT">ABOUT</a>
    <a href="#SETUP">SETUP</a>
    <a href="#TEST">TEST</a>
    <a href="#LACKS">LACKS</a>
    <a href="#LAW">LAW</a>
    <a href="#ALSO">ALSO</a>
    <a href="#HOME">HOME</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>index</li>
    <li class='tc'></li>
    <li class='tr'>index</li>
  </ol>

  <h1><a href="http://travis-ci.org/astrolet/precious"><img src="https://secure.travis-ci.org/astrolet/precious.png" alt="Build Status" /></a></h1>
<h1>precious -- the minimum kind of ephemeris</h1>

<h2 id="SAY">SAY</h2>

<p><a href="http://en.wikipedia.org/wiki/Ephemeris">Ephemeris</a> data,
from a Node.js library or the command line.</p>

<h2 id="HOW">HOW</h2>

<h3 id="lib-">lib/</h3>

<p>The programming way.</p>

<p>Give the precious <a class="man-ref" href="annotations/ephemeris.html">ephemeris<span class="s">(3)</span></a> some <a class="man-ref" href="json.7.html">precious-json<span class="s">(7)</span></a>
and it will return a <a href="http://nodejs.org/api/stream.html">stream</a>
of what you asked for.  Here is a CoffeeScript example:</p>

<pre><code>got = require('precious').ephemeris {}, convenient: true
got.stdout.on 'data', (s) -&gt; console.log JSON.parse s
</code></pre>

<p>And a JavaScript equivalent:</p>

<pre><code>var got = require('precious').ephemeris({}, {convenient: true});
got.stdout.on('data', function(s) {
  console.log(JSON.parse(s));
});
</code></pre>

<h3 id="bin-">bin/</h3>

<p>The <a class="man-ref" href="precious.1.html">precious<span class="s">(1)</span></a> cli.</p>

<p>As lazy as possible, fetch ephemeris data with the convenient defaults:</p>

<pre><code>precious o {}
</code></pre>

<p>With specific time, "pprint" for a bit more readable output + names:</p>

<pre><code>precious o '{"utc": "1974-06-30T21:45Z", "out": "pprint"}'
</code></pre>

<p>No "utc" for <em>right now</em>, it also fetches the angles, given geo-location:</p>

<pre><code>precious o '{"geo": {"lat": 43.2166667, "lon": 27.9166667}}'
</code></pre>

<p>Copy &amp; change the <code>test/io/for/example.json</code> to fit your use-case preferences.
See <a class="man-ref" href="json.7.html">precious-json<span class="s">(7)</span></a> and <a class="man-ref" href="http://astrolet.github.com/eden/eden.1.html">eden<span class="s">(1)</span></a> for further / friendlier options.</p>

<p>Eden offers convenience and can be used either as a library or as cli interface.
It also makes precious more useful and readable in many ways.
Another reason to consider it is for generating <a class="man-ref" href="json.7.html">precious-json<span class="s">(7)</span></a> settings
to be used for calling <a class="man-ref" href="annotations/ephemeris.html">ephemeris<span class="s">(3)</span></a>, which is a precious module export,
or else through the rather limited <a class="man-ref" href="precious.1.html">precious<span class="s">(1)</span></a> cli.</p>

<h2 id="ABOUT">ABOUT</h2>

<p>Node package distribution of
<a href="http://pypi.python.org/pypi/pyswisseph">pyswisseph</a>.
Python is just the current method for calling the Swiss Ephemeris.
It has been handy for a rapid prototype / bootstrapping.
Direct JavaScript bindings are preferable and will eventually be implemented.
At that point, the Python code is to be ported and retired.
This module's purpose is to make writing astrology apps on <em>Node.JS</em>
both possible and straightforward.</p>

<p><a href="http://www.astrolin.com/to/eden">Eden</a> depends on it.
As may other libs / interfaces too.</p>

<p>Think of <code>precious</code> as a language-neutral, decoupled way to get data from
the Swiss Ephemeris.  Or from any kind of ephemeris for that matter.
For example someone may choose to implement a Moshier substitute, whether
for the sake of using a different license or whatever the reason.</p>

<p>In reality, while it may some day offer varying ephemeris choice,
people are likely to prefer the Swiss Ephemeris anyway.
Furthermore, while it can use various languages through child-process calls --
the performing way would be JavaScript bindings, because it's intended
exclusively for JavaScript use, of-course also CoffeeScript, etc.
It is really just an interface abstraction that affords some potential freedom.
A way of making progress while keeping your options open.</p>

<p>Precious is a <a class="man-ref" href="json.7.html">precious-json<span class="s">(7)</span></a> spec about (a limited subset of) what
one may want from an ephemeris, so that requests for data
can be decoupled from the implementation(s) that satisfy them.</p>

<p>The reference implementation and the ephemeris are for the time being
part of <code>precious</code> itself, however there is no reason they can't be external
modules / dependencies, especially with regards to varying the
choice of ephemeris or how it's to be called.  There may also be a couple of
ways to call the Swiss Ephemeris - either with bindings for Node or possibly
compiling it to pure JavaScript with <a href="http://emscripten.org">Emscripten</a> for
example.  The latter will offer the possibility to run practically anywhere.
The former will obviously be preferable when using Node.  The following
<a href="https://github.com/mivion/swisseph">swisseph</a> library is a promising
candidate for doing just that.</p>

<p>The kind of ephemeris data provided, is currently rather simple and constrained.
Configuration options will progressively be added to include
other more interesting and necessary things.  So,
precious will aim to satisfy a wider range of use-cases.
It will, however, remain an opinionated subset of what an ephemeris can provide.
Not everything that's possible is necessary, though be welcome to add
anything you may wish to contribute for more specialized use-case enablement.</p>

<h2 id="SETUP">SETUP</h2>

<p>With the <a href="http://npmjs.org/">npm</a> prerequisite, do <code>npm install -g precious</code>.
The <code>-g</code> for global, means the <code>precious</code> command can be run
regardless of what the current directory is.</p>

<h3 id="Dependencies-">Dependencies:</h3>

<ul>
<li>node</li>
<li>npm</li>
<li>gcc</li>
<li>python</li>
<li>pycco</li>
<li>gravity</li>
</ul>


<p>There is a <code>cake install</code> task that is somewhat useful.  It assumes that
Python, a C compiler and Node.js are already installed.</p>

<h2 id="TEST">TEST</h2>

<pre><code>cake test
</code></pre>

<h2 id="LACKS">LACKS</h2>

<p>It's unknown how the project should be setup for Windows development / use.
Perhaps it just works flawlessly or with just a bit of extra setup effort?
While <a href="http://dailyjs.com/2012/05/17/windows-and-node-3">installing the stuff</a>
may be relatively straightforward, I'm not too sure all my code would run as is.
Verification / contribution of setup instructions would be great to have.
Of-course, issues are welcome - just as well.</p>

<p>Spawning a process to run a Python script is kind of slow.
Some day, it would be preferable to have Node.js bindings directly to
the Swiss Ephemeris, without going through Python or FFI. Either this
<a href="https://github.com/mivion/swisseph">swisseph</a> library or (maybe also)
<a href="http://emscripten.org">Emscripten</a> stand out as possible next steps.</p>

<h2 id="LAW">LAW</h2>

<p>This is <a href="http://astrolet.github.com/precious/UNLICENSE.html">Unlicensed</a> (free
and unencumbered public domain software), except for LICENSE applying to the
copy of <a href="http://pypi.python.org/pypi/pyswisseph">pyswisseph</a>
with <a href="http://www.astro.com/swisseph">Swiss Ephemeris</a> source
and its conditions (located in swe/src).</p>

<h2 id="ALSO">ALSO</h2>

<p><a class="man-ref" href="precious.1.html">precious<span class="s">(1)</span></a>, <a class="man-ref" href="annotations/precious.html">precious-coffee<span class="s">(1)</span></a>, <a class="man-ref" href="json.7.html">precious-json<span class="s">(7)</span></a>, <a class="man-ref" href="http://astrolet.github.com/upon">upon<span class="s">(7)</span></a>, <a class="man-ref" href="http://astrolet.github.com/sin">gravity<span class="s">(6)</span></a>,
<a class="man-ref" href="annotations/ephemeris.html">ephemeris<span class="s">(3)</span></a>, <a class="man-ref" href="annotations/python/ephemeris.html">ephemeris-py<span class="s">(3)</span></a>, <a class="man-ref" href="http://astrolet.github.com/eden/eden.1.html">eden<span class="s">(1)</span></a></p>

<h2 id="HOME">HOME</h2>

<p><a class="man-ref" href="http://astrolin.com/to/precious">Base<span class="s">(7)</span></a></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'></li>
    <li class='tc'>September 2012</li>
    <li class='tr'>index</li>
  </ol>

  </div>
</body>
</html>
