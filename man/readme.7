.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "README" "7" "June 2012" "" ""
.
.SH "SAY"
Ephemeris \fIhttp://en\.wikipedia\.org/wiki/Ephemeris\fR data, from a Node\.js library or the command line\.
.
.SH "HOW"
.
.SS "lib/"
The programming way\.
.
.P
Give the precious ephemeris(3) some precious\-json(7) and it will return a stream \fIhttp://nodejs\.org/api/stream\.html\fR of what you asked for\. Here is a CoffeeScript example:
.
.IP "" 4
.
.nf

got = require(\'precious\')\.ephemeris {}, convenient: true
got\.stdout\.on \'data\', (s) \-> console\.log JSON\.parse s
.
.fi
.
.IP "" 0
.
.P
And a JavaScript equivalent:
.
.IP "" 4
.
.nf

var got = require(\'precious\')\.ephemeris({}, {convenient: true});
got\.stdout\.on(\'data\', function(s) {
  console\.log(JSON\.parse(s));
});
.
.fi
.
.IP "" 0
.
.SS "bin/"
The precious(1) cli\.
.
.P
As lazy as possible, fetch ephemeris data with the convenient defaults:
.
.IP "" 4
.
.nf

precious o {}
.
.fi
.
.IP "" 0
.
.P
With specific time, "pprint" for a bit more readable output + names:
.
.IP "" 4
.
.nf

precious o \'{"utc": "1974\-06\-30T21:45Z", "out": "pprint"}\'
.
.fi
.
.IP "" 0
.
.P
No "utc" for \fIright now\fR, it also fetches the angles, given geo\-location:
.
.IP "" 4
.
.nf

precious o \'{"geo": {"lat": 43\.2166667, "lon": 27\.9166667}}\'
.
.fi
.
.IP "" 0
.
.P
Copy & change the \fBtest/io/for/example\.json\fR to fit your use\-case preferences\. See precious\-json(7) and eden(1) for further / friendlier options\.
.
.P
Eden offers convenience and can be used either as a library or as cli interface\. It also makes precious more useful and readable in many ways\. Another reason to consider it is for generating precious\-json(7) settings to be used for calling ephemeris(3), which is a precious module export, or else through the rather limited precious(1) cli\.
.
.SH "ABOUT"
Node package distribution of pyswisseph \fIhttp://pypi\.python\.org/pypi/pyswisseph\fR\. Python is just the current method for calling the Swiss Ephemeris\. It has been handy for a rapid prototype / bootstrapping\. Direct JavaScript bindings are preferable and will eventually be implemented\. At that point, the Python code is to be ported and retired\. This module\'s purpose is to make writing astrology apps on \fINode\.JS\fR both possible and straightforward\.
.
.P
Eden \fIhttp://www\.astrolin\.com/to/eden\fR depends on it\. As may other libs / interfaces too\.
.
.P
Think of \fBprecious\fR as a language\-neutral, decoupled way to get data from the Swiss Ephemeris\. Or from any kind of ephemeris for that matter\. For example someone may choose to implement a Moshier substitute, whether for the sake of using a different license or whatever the reason\.
.
.P
In reality, while it may some day offer varying ephemeris choice, people are likely to prefer the Swiss Ephemeris anyway\. Furthermore, while it can use various languages through child\-process calls \-\- the performing way would be JavaScript bindings, because it\'s intended exclusively for JavaScript use, of\-course also CoffeeScript, etc\. It is really just an interface abstraction that affords some potential freedom\. A way of making progress while keeping your options open\.
.
.P
Precious is a precious\-json(7) spec about (a limited subset of) what one may want from an ephemeris, so that requests for data can be decoupled from the implementation(s) that satisfy them\.
.
.P
The reference implementation and the ephemeris are for the time being part of \fBprecious\fR itself, however there is no reason they can\'t be external modules / dependencies, especially with regards to varying the choice of ephemeris or how it\'s to be called\. There may also be a couple of ways to call the Swiss Ephemeris \- either with bindings for Node or possibly compiling it to pure JavaScript with Emscripten \fIhttp://emscripten\.org\fR for example\. The latter will offer the possibility to run practically anywhere\. The former will obviously be preferable when using Node\. The following swisseph \fIhttps://github\.com/mivion/swisseph\fR library is a promising candidate for doing just that\.
.
.P
The kind of ephemeris data provided, is currently rather simple and constrained\. Configuration options will progressively be added to include other more interesting and necessary things\. So, precious will aim to satisfy a wider range of use\-cases\. It will, however, remain an opinionated subset of what an ephemeris can provide\. Not everything that\'s possible is necessary, though be welcome to add anything you may wish to contribute for more specialized use\-case enablement\.
.
.SH "SETUP"
With the npm \fIhttp://npmjs\.org/\fR prerequisite, do \fBnpm install \-g precious\fR\. The \fB\-g\fR for global, means the \fBprecious\fR command can be run regardless of what the current directory is\.
.
.SS "Dependencies:"
.
.IP "\(bu" 4
node
.
.IP "\(bu" 4
npm
.
.IP "\(bu" 4
gcc
.
.IP "\(bu" 4
python
.
.IP "\(bu" 4
pycco
.
.IP "\(bu" 4
gravity
.
.IP "" 0
.
.P
There is a \fBcake install\fR task that is somewhat useful\. It assumes that Python, a C compiler and Node\.js are already installed\.
.
.SH "TEST"
.
.nf

cake test
.
.fi
.
.SH "LACKS"
It\'s unknown how the project should be setup for Windows development / use\. Perhaps it just works flawlessly or with just a bit of extra setup effort? While installing the stuff \fIhttp://dailyjs\.com/2012/05/17/windows\-and\-node\-3\fR may be relatively straightforward, I\'m not too sure all my code would run as is\. Verification / contribution of setup instructions would be great to have\. Of\-course, issues are welcome \- just as well\.
.
.P
Spawning a process to run a Python script is kind of slow\. Some day, it would be preferable to have Node\.js bindings directly to the Swiss Ephemeris, without going through Python or FFI\. Either this swisseph \fIhttps://github\.com/mivion/swisseph\fR library or (maybe also) Emscripten \fIhttp://emscripten\.org\fR stand out as possible next steps\.
.
.SH "LAW"
This is Unlicensed \fIhttp://astrolet\.github\.com/precious/UNLICENSE\.html\fR (free and unencumbered public domain software), except for LICENSE applying to the copy of pyswisseph \fIhttp://pypi\.python\.org/pypi/pyswisseph\fR with Swiss Ephemeris \fIhttp://www\.astro\.com/swisseph\fR source and its conditions (located in swe/src)\.
.
.SH "ALSO"
precious(1), precious\-coffee(1), precious\-json(7), upon(7), gravity(6), ephemeris(3), ephemeris\-py(3), eden(1)
.
.SH "HOME"
Base(7)
